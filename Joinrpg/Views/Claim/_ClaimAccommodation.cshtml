@using JoinRpg.DataModel
@using JoinRpg.Web.Models.Accommodation
@model ClaimAccommodationViewModel
<div class="panel panel-default" id="accommodationRequests">
    <div class="panel-heading">Поданы заявки на проживание</div>
    <div class="panel-body">
        @if (!Model.AccommodationRequests.Any())
        {
            <h5>Заявки на проживание не подавались.</h5>
        }
        @foreach (var accommodationRequests in Model.AccommodationRequests)
        {
            var className = "alert-warning";
            if (accommodationRequests.IsAccepted == AccommodationRequest.InviteState.Accepted)
            {
                className = "alert-success";

            }
            <div class="@className">
                @accommodationRequests.AccommodationType.Name (@accommodationRequests.AccommodationType.Capacity места, @accommodationRequests.AccommodationType.Cost рублей)
            </div>
        }
    </div>
</div>
<div class="panel panel-default" id="accommodationTypes">
    <div class="panel-heading">Возможные варианты проживания</div>
    <div class="panel-body">
        @using (Html.BeginForm("PostAccommodationRequest", "Claim", FormMethod.Post, new {enctype = "multipart/form-data"}))
        {
            @Html.AntiForgeryToken()
            foreach (var accommodationType in Model.AvailableAccommodationTypes)
            {
                var className = "";
                var checkedState ="";
                if (Model.AccommodationRequests.Any(request => request.AccommodationType == accommodationType))
                {

                    className = "text-success";
                    checkedState = "checked";
                }
                <div class="radio" style="margin-bottom: 2em;">
                     <label class="@className">
                         <input type="radio" name="AccommodationTypeId" id="accomodationType @accommodationType.Id" value="@accommodationType.Id" @checkedState>
                         @accommodationType.Name (@accommodationType.Capacity места, @accommodationType.Cost рублей)<br/>
                         @accommodationType.Description
                     </label>
                 </div>
             }
            <button class="btn btn-default" type="submit">Сохранить проживание</button>
        }
    </div>
</div>
