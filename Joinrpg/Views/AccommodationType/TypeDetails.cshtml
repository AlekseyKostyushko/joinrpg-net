@using System.Collections.ObjectModel
@using JoinRpg.Web.Models.Accommodation
@model AccommodationTypeViewModel
@{
    ViewBag.IsInEditMode = false;
    ViewBag.ActionName = "Добавить";
    if (Model.Id != 0)
    {
        ViewBag.Title = "Тип проживания: «" + Model.Project.ProjectName + "\\" + Model.Name + "»";
        <h2>@ViewBag.Title</h2>
        ViewBag.ActionName = "Изменить";
        ViewBag.IsInEditMode = true;
    }
}
@if (Model.CanManageRooms)
{
    @Html.Partial("TypeEdit", Model)
}
@if (ViewBag.IsInEditMode)
{
    <hr />
    @Html.Partial("AccommodationIndex", Model.Accommodations ?? new Collection<ProjectAccommodationViewModel>(), new ViewDataDictionary { { "TypeName", "«" + Model.Project.ProjectName + "\\" + Model.Name + "»" } })

    if (Model.CanManageRooms)
     {
         <hr/>
         @Html.Partial("ProjectAccommodationEdit", new ProjectAccommodationViewModel() {Id = 0, ProjectId = Model.ProjectId, AccommodationTypeId = Model.Id}, new ViewDataDictionary {{"TypeName", "«" + Model.Project.ProjectName + "\\" + Model.Name + "»"}})
     }
}


